let jSprite=function(){let e={debug:!1,spriteSheet:!1,container:!1,columns:!1,rows:!1,autoStart:!1,repeat:!0,startFrame:!1,length:!1,timing:!1,timings:!1,widthOffset:0,onStart:!1,onStop:!1,onProgress:!1,onComplete:!1,onRepeat:!1};if(arguments[0]&&"object"==typeof arguments[0])for(var t in arguments[0])if(e.hasOwnProperty(t)){let r=arguments[0][t];e[t]=void 0!=r&&arguments[0][t]}let r={dom:{container:!1},img:!1,spriteSheetW:0,spriteSheetH:0,frameW:0,frameH:0,startFrame:0,endFrame:0,length:0,maxFrames:0,noOfFramesToPlay:0,frame:1,frames:[],stopRequested:!1,bg:!1,dispose:!1,status:"stopped"};function a(t){r.spriteSheetW=t.target.width,r.spriteSheetH=t.target.height,r.frameW=Math.ceil(t.target.width/e.columns),r.frameH=Math.ceil(t.target.height/e.rows);let a="url("+t.target.src+")";r.dom.container=document.getElementById(e.container),r.dom.container.style.backgroundImage=a,r.dom.container.style.backgroundRepeat="no-repeat",r.dom.container.style.backgroundPosition="0px 0px",r.dom.container.style.width=r.frameW+"px",r.dom.container.style.height=r.frameH+"px",r.xLim=r.spriteSheetW/r.frameW,r.yLim=r.spriteSheetH/r.frameH,r.frameW+=e.widthOffset,r.dom.container.style.width=r.frameW+"px",r.dom.container.style.height=r.frameH+"px",r.maxFrames=e.columns*e.rows,s();for(let t=0;t<e.rows;t++)for(let a=0;a<e.columns;a++){0;let e=0-a*r.frameW,s=0-t*r.frameH;r.frames.push([e,s])}r.frame=r.startFrame;let n=r.frames[r.startFrame-1],m=n[0],i=n[1];r.dom.container.style.backgroundPosition=m+"px "+i+"px",e.debug&&(l("frameW:"+r.frameW+"   frameH:"+r.frameH),l("cols:"+e.columns+"   rows:"+e.rows),l("startPos: "+n)),e.autoStart&&(!1!==e.onStart&&e.onStart(),o())}function s(){if(!1===e.startFrame?r.startFrame=1:(r.startFrame=parseInt(e.startFrame),r.startFrame<0&&(r.startFrame=1)),!1!==e.length&&"number"==typeof e.length){if(r.length=e.length,r.startFrame+r.length-1>r.maxFrames){let t="jSprite: You have set a playback length of ["+e.length+"] from a ";t+="starting frame of ["+r.startFrame+"].",t+=" No enough frames to play! RESETTING playback to first and last frames on sprite src[",t+=e.spriteSheet+"]",console.error(t),r.startFrame=1,r.length=r.maxFrames}}else r.length=r.maxFrames;r.noOfFramesToPlay=r.startFrame+(r.length-1),r.endFrame=r.startFrame+r.length-1,r.endFrame>r.maxFrames&&(r.endFrame=r.maxFrames),e.debug&&(l("jSprite: calc"),l("maxFrames = "+r.maxFrames),l("startFrame = "+r.startFrame+"   vars.endFrame = "+r.endFrame),l("vars.length = "+r.length+"    vars.noOfFramesToPlay = "+r.noOfFramesToPlay))}function o(){if(!0===this.dispose)return;if(!0===r.stopRequested)return r.stopRequested=!1,r.status="stopped",void(!1!==e.onStop&&e.onStop());!0===e.repeat&&r.frame>r.endFrame&&(r.frame=r.startFrame),r.status="playing";let t=function(){if(!1!==e.timing)return e.timing;{let t=e.timings[r.frame-1];return t||(t=1e3),t}}(),a=r.frames[r.frame-1],s="";s+=r.frame+"/"+r.maxFrames+"   ",s+=a+"   ",s+="frames.len = "+r.frames.length+"   ";let n=a[0],m=a[1];if(r.dom.container.style.backgroundPosition=n+"px "+m+"px",!1!==e.onProgress){let t={frame:r.frame,totalFrames:r.maxFrames};e.onProgress(t)}r.frame++,r.frame<=r.endFrame?setTimeout(o,t):(r.frame=r.startFrame,e.repeat?(!1!==e.onRepeat&&e.onRepeat(),setTimeout(o,t)):(!1!==e.onComplete&&e.onComplete(),r.status="stopped"))}function n(){r.frame=r.startFrame,"stopped"==r.status&&o()}function m(){"playing"!=r.status&&(!1!==e.onStart&&e.onStart(),o())}function i(){r.stopRequested=!0}function l(e){console.log(e)}this.start=function(){m()},this.stop=function(){i()},this.restart=function(){n()},this.setStartFrame=function(t){e.debug&&(console.clear(),l("jSprite.setStartFrame(v:"+t+")")),e.startFrame=t,e.length=!1,r.length=!1,r.frame=e.startFrame,s()},this.setLength=function(t){e.debug&&(console.clear(),l("jSprite.setLength(v:"+t+")")),e.length=t,r.length=t,r.frame=r.startFrame,s()},this.dispose=function(){r.dispose=!0,delete r,delete e,delete setLength,delete setStartFrame,delete m,delete i,delete n},e.startFrame<1&&(e.startFrame=1),!1!==e.spriteSheet?!1!==e.container?!1!==e.columns?!1!==e.rows?!1!==e.timing||!1!==e.timings?(r.img=new Image,r.img.onload=a,r.img.src=e.spriteSheet):console.error("jsprite.js: usage error: you must specify either timing or timings for each frame!"):console.error("jsprite.js: usage error: you must specify the no' of frames (rows) onthe y axis!"):console.error("jsprite.js: usage error: you must specify the no' of frames (columns) on the x axis!"):console.error("jsprite.js: usage error: you must specify a container (must be an element id"):console.error("jsprite.js: usage error: you must specify a sprite sheet to use!")};